{"id":"K7aR","dependencies":[{"name":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/lib/helpers.js.map","includedInParent":true,"mtime":499162500000},{"name":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/src/helpers.tsx","includedInParent":true,"mtime":499162500000},{"name":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/package.json","includedInParent":true,"mtime":1583756177000},{"name":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/package.json","includedInParent":true,"mtime":1583756136000},{"name":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/.browserslistrc","includedInParent":true,"mtime":1583756140000},{"name":"piral-base","loc":{"line":3,"column":29},"parent":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/lib/helpers.js","resolved":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-base/lib/index.js"},{"name":"@dbeining/react-atom","loc":{"line":4,"column":29},"parent":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/lib/helpers.js","resolved":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/@dbeining/react-atom/dist/react-atom.js"},{"name":"./modules","loc":{"line":5,"column":26},"parent":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/lib/helpers.js","resolved":"/Volumes/Projects430/Development/src/js_dev/ReactJS/piral-app/node_modules/piral-core/lib/modules/index.js"}],"generated":{"js":"\"use strict\";function e(e){return n(e)||r(e)||t()}function t(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}function r(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}function n(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}Object.defineProperty(exports,\"__esModule\",{value:!0});var i=require(\"piral-base\"),a=require(\"@dbeining/react-atom\"),s=require(\"./modules\");function c(e){var t=Object.assign(Object.assign({},s.globalDependencies),e);return function(){return t}}function o(e){var t=Object.assign(Object.assign({},s.getLocalDependencies()),e);return function(){return t}}function u(e){e.context;var t=e.createApi,r=e.availablePilets,n=e.getDependencies,i=e.strategy,a=e.requestPilets;return{pilets:r,getDependencies:n,strategy:i,dependencies:s.globalDependencies,fetchPilets:function(){var e=a();return e},createApi:t}}exports.setSharedDependencies=c,exports.extendSharedDependencies=o,exports.createPiletOptions=u;"},"sourceMaps":{"js":{"mappings":[{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":0}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":13}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":22}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":24}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":27}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":34}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":36}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":40}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":42}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":46}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":50}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":59}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":63}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":69}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":73}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":83}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":134}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":143}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":145}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":148}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":151}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":158}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":170}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":177}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":181}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":204}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":211}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":221}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":230}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":235}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":238}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":245}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":251}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":256}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":259}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":268}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":270}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":273}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":276}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":282}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":290}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":293}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":294}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":298}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":302}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":304}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":306}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":308}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":312}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":318}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":320}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":328}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":330}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":332}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":339}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":343}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":345}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":348}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":350}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":353}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":360}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":363}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":370}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":385}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":393}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":406}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":407}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":414}},{"source":"../src/helpers.tsx","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":418}},{"source":"../src/helpers.tsx","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":422}},{"source":"../src/helpers.tsx","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":424}},{"source":"../src/helpers.tsx","name":null,"original":{"line":1,"column":0},"generated":{"line":1,"column":432}},{"source":"../src/helpers.tsx","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":446}},{"source":"../src/helpers.tsx","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":448}},{"source":"../src/helpers.tsx","name":null,"original":{"line":10,"column":0},"generated":{"line":1,"column":456}},{"source":"../src/helpers.tsx","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":480}},{"source":"../src/helpers.tsx","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":482}},{"source":"../src/helpers.tsx","name":null,"original":{"line":11,"column":0},"generated":{"line":1,"column":490}},{"source":"../src/helpers.tsx","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":503}},{"source":"../src/helpers.tsx","name":null,"original":{"line":20,"column":16},"generated":{"line":1,"column":512}},{"source":"../src/helpers.tsx","name":null,"original":{"line":20,"column":38},"generated":{"line":1,"column":514}},{"source":"../src/helpers.tsx","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":517}},{"source":"../src/helpers.tsx","name":null,"original":{"line":21,"column":8},"generated":{"line":1,"column":521}},{"source":"../src/helpers.tsx","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":523}},{"source":"../src/helpers.tsx","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":530}},{"source":"../src/helpers.tsx","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":537}},{"source":"../src/helpers.tsx","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":544}},{"source":"../src/helpers.tsx","name":null,"original":{"line":21,"column":20},"generated":{"line":1,"column":551}},{"source":"../src/helpers.tsx","name":null,"original":{"line":22,"column":7},"generated":{"line":1,"column":554}},{"source":"../src/helpers.tsx","name":null,"original":{"line":22,"column":7},"generated":{"line":1,"column":556}},{"source":"../src/helpers.tsx","name":null,"original":{"line":23,"column":7},"generated":{"line":1,"column":576}},{"source":"../src/helpers.tsx","name":null,"original":{"line":25,"column":9},"generated":{"line":1,"column":579}},{"source":"../src/helpers.tsx","name":null,"original":{"line":25,"column":9},"generated":{"line":1,"column":586}},{"source":"../src/helpers.tsx","name":null,"original":{"line":25,"column":15},"generated":{"line":1,"column":597}},{"source":"../src/helpers.tsx","name":null,"original":{"line":25,"column":15},"generated":{"line":1,"column":604}},{"source":"../src/helpers.tsx","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":607}},{"source":"../src/helpers.tsx","name":null,"original":{"line":32,"column":16},"generated":{"line":1,"column":616}},{"source":"../src/helpers.tsx","name":null,"original":{"line":32,"column":41},"generated":{"line":1,"column":618}},{"source":"../src/helpers.tsx","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":621}},{"source":"../src/helpers.tsx","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":625}},{"source":"../src/helpers.tsx","name":null,"original":{"line":33,"column":20},"generated":{"line":1,"column":627}},{"source":"../src/helpers.tsx","name":null,"original":{"line":33,"column":20},"generated":{"line":1,"column":634}},{"source":"../src/helpers.tsx","name":null,"original":{"line":33,"column":20},"generated":{"line":1,"column":641}},{"source":"../src/helpers.tsx","name":null,"original":{"line":33,"column":20},"generated":{"line":1,"column":648}},{"source":"../src/helpers.tsx","name":null,"original":{"line":33,"column":20},"generated":{"line":1,"column":655}},{"source":"../src/helpers.tsx","name":null,"original":{"line":34,"column":7},"generated":{"line":1,"column":658}},{"source":"../src/helpers.tsx","name":null,"original":{"line":34,"column":7},"generated":{"line":1,"column":660}},{"source":"../src/helpers.tsx","name":null,"original":{"line":35,"column":7},"generated":{"line":1,"column":684}},{"source":"../src/helpers.tsx","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":687}},{"source":"../src/helpers.tsx","name":null,"original":{"line":37,"column":9},"generated":{"line":1,"column":694}},{"source":"../src/helpers.tsx","name":null,"original":{"line":37,"column":15},"generated":{"line":1,"column":705}},{"source":"../src/helpers.tsx","name":null,"original":{"line":37,"column":15},"generated":{"line":1,"column":712}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":715}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":16},"generated":{"line":1,"column":724}},{"source":"../src/helpers.tsx","name":null,"original":{"line":56,"column":21},"generated":{"line":1,"column":726}},{"source":"../src/helpers.tsx","name":null,"original":{"line":50,"column":2},"generated":{"line":1,"column":729}},{"source":"../src/helpers.tsx","name":null,"original":{"line":50,"column":2},"generated":{"line":1,"column":731}},{"source":"../src/helpers.tsx","name":null,"original":{"line":50,"column":2},"generated":{"line":1,"column":739}},{"source":"../src/helpers.tsx","name":null,"original":{"line":51,"column":2},"generated":{"line":1,"column":743}},{"source":"../src/helpers.tsx","name":null,"original":{"line":51,"column":2},"generated":{"line":1,"column":745}},{"source":"../src/helpers.tsx","name":null,"original":{"line":51,"column":2},"generated":{"line":1,"column":747}},{"source":"../src/helpers.tsx","name":null,"original":{"line":52,"column":2},"generated":{"line":1,"column":757}},{"source":"../src/helpers.tsx","name":null,"original":{"line":52,"column":2},"generated":{"line":1,"column":759}},{"source":"../src/helpers.tsx","name":null,"original":{"line":52,"column":2},"generated":{"line":1,"column":761}},{"source":"../src/helpers.tsx","name":null,"original":{"line":53,"column":2},"generated":{"line":1,"column":777}},{"source":"../src/helpers.tsx","name":null,"original":{"line":53,"column":2},"generated":{"line":1,"column":779}},{"source":"../src/helpers.tsx","name":null,"original":{"line":53,"column":2},"generated":{"line":1,"column":781}},{"source":"../src/helpers.tsx","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":797}},{"source":"../src/helpers.tsx","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":799}},{"source":"../src/helpers.tsx","name":null,"original":{"line":54,"column":2},"generated":{"line":1,"column":801}},{"source":"../src/helpers.tsx","name":null,"original":{"line":55,"column":2},"generated":{"line":1,"column":810}},{"source":"../src/helpers.tsx","name":null,"original":{"line":55,"column":2},"generated":{"line":1,"column":812}},{"source":"../src/helpers.tsx","name":null,"original":{"line":55,"column":2},"generated":{"line":1,"column":814}},{"source":"../src/helpers.tsx","name":null,"original":{"line":115,"column":9},"generated":{"line":1,"column":828}},{"source":"../src/helpers.tsx","name":null,"original":{"line":115,"column":9},"generated":{"line":1,"column":834}},{"source":"../src/helpers.tsx","name":null,"original":{"line":116,"column":4},"generated":{"line":1,"column":835}},{"source":"../src/helpers.tsx","name":null,"original":{"line":116,"column":12},"generated":{"line":1,"column":842}},{"source":"../src/helpers.tsx","name":null,"original":{"line":117,"column":4},"generated":{"line":1,"column":844}},{"source":"../src/helpers.tsx","name":null,"original":{"line":117,"column":4},"generated":{"line":1,"column":860}},{"source":"../src/helpers.tsx","name":null,"original":{"line":118,"column":4},"generated":{"line":1,"column":862}},{"source":"../src/helpers.tsx","name":null,"original":{"line":118,"column":4},"generated":{"line":1,"column":871}},{"source":"../src/helpers.tsx","name":null,"original":{"line":119,"column":4},"generated":{"line":1,"column":873}},{"source":"../src/helpers.tsx","name":null,"original":{"line":119,"column":18},"generated":{"line":1,"column":886}},{"source":"../src/helpers.tsx","name":null,"original":{"line":119,"column":18},"generated":{"line":1,"column":888}},{"source":"../src/helpers.tsx","name":null,"original":{"line":120,"column":4},"generated":{"line":1,"column":907}},{"source":"../src/helpers.tsx","name":null,"original":{"line":120,"column":15},"generated":{"line":1,"column":919}},{"source":"../src/helpers.tsx","name":null,"original":{"line":121,"column":12},"generated":{"line":1,"column":930}},{"source":"../src/helpers.tsx","name":null,"original":{"line":121,"column":12},"generated":{"line":1,"column":934}},{"source":"../src/helpers.tsx","name":null,"original":{"line":121,"column":22},"generated":{"line":1,"column":936}},{"source":"../src/helpers.tsx","name":null,"original":{"line":165,"column":13},"generated":{"line":1,"column":940}},{"source":"../src/helpers.tsx","name":null,"original":{"line":165,"column":13},"generated":{"line":1,"column":947}},{"source":"../src/helpers.tsx","name":null,"original":{"line":167,"column":4},"generated":{"line":1,"column":950}},{"source":"../src/helpers.tsx","name":null,"original":{"line":167,"column":4},"generated":{"line":1,"column":960}},{"source":"../src/helpers.tsx","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":963}},{"source":"../src/helpers.tsx","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":971}},{"source":"../src/helpers.tsx","name":null,"original":{"line":20,"column":0},"generated":{"line":1,"column":993}},{"source":"../src/helpers.tsx","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":995}},{"source":"../src/helpers.tsx","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":1003}},{"source":"../src/helpers.tsx","name":null,"original":{"line":32,"column":0},"generated":{"line":1,"column":1028}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":1030}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":1038}},{"source":"../src/helpers.tsx","name":null,"original":{"line":49,"column":0},"generated":{"line":1,"column":1057}}],"sources":{"../src/helpers.tsx":"import {\n  AvailableDependencies,\n  GenericPiletApiCreator,\n  PiletDependencyGetter,\n  PiletLoadingStrategy,\n  LoadPiletsOptions,\n  getDependencyResolver,\n  loadPilet,\n} from 'piral-base';\nimport { addChangeHandler } from '@dbeining/react-atom';\nimport { globalDependencies, getLocalDependencies } from './modules';\nimport { Pilet, PiletApi, PiletRequester, GlobalStateContext } from './types';\n\n/**\n * Creates a dependency getter that sets the shared dependencies explicitly.\n * Overrides the potentially set shared dependencies from the Piral CLI, but\n * keeps all global dependencies such as react, react-dom, ...\n * @param sharedDependencies The shared dependencies to declare.\n */\nexport function setSharedDependencies(sharedDependencies: AvailableDependencies) {\n  const dependencies = {\n    ...globalDependencies,\n    ...sharedDependencies,\n  };\n  return () => dependencies;\n}\n\n/**\n * Creates a dependency getter that extends the shared dependencies with additional dependencies.\n * @param additionalDependencies The additional dependencies to declare.\n */\nexport function extendSharedDependencies(additionalDependencies: AvailableDependencies) {\n  const dependencies = {\n    ...getLocalDependencies(),\n    ...additionalDependencies,\n  };\n  return () => dependencies;\n}\n\ninterface PiletOptionsConfig {\n  availablePilets: Array<Pilet>;\n  createApi: GenericPiletApiCreator<PiletApi>;\n  getDependencies: PiletDependencyGetter;\n  strategy: PiletLoadingStrategy<PiletApi>;\n  requestPilets: PiletRequester;\n  context: GlobalStateContext;\n}\n\nexport function createPiletOptions({\n  context,\n  createApi,\n  availablePilets,\n  getDependencies,\n  strategy,\n  requestPilets,\n}: PiletOptionsConfig): LoadPiletsOptions<PiletApi> {\n  // if we build the debug version of piral (debug and emulator build)\n  if (process.env.DEBUG_PIRAL !== undefined) {\n    // the DEBUG_PIRAL env should contain the Piral CLI compatibility version\n    window['dbg:piral'] = {\n      debug: 'v0',\n      instance: {\n        name: process.env.BUILD_PCKG_NAME,\n        version: process.env.BUILD_PCKG_VERSION,\n        dependencies: process.env.SHARED_DEPENDENCIES,\n        context,\n      },\n      build: {\n        date: process.env.BUILD_TIME_FULL,\n        cli: process.env.PIRAL_CLI_VERSION,\n        compat: process.env.DEBUG_PIRAL,\n      },\n      pilets: {\n        createApi,\n        getDependencies: getDependencyResolver(globalDependencies, getDependencies),\n        loadPilet,\n        requestPilets,\n      },\n    };\n\n    // we watch the state container for changes\n    addChangeHandler(context.state, 'debugging', ({ current, previous }) => {\n      const viewState = sessionStorage.getItem('dbg:view-state') !== 'off';\n\n      if (viewState) {\n        const infos = new Error().stack;\n\n        if (infos) {\n          // Chrome, Firefox, ... (full capability)\n          const action = infos.split('\\n')[7].replace(/^\\s+at\\s+(Atom\\.|Object\\.)?/, '');\n          console.group(\n            `%c Piral State Change %c ${new Date().toLocaleTimeString()}`,\n            'color: gray; font-weight: lighter;',\n            'color: black; font-weight: bold;',\n          );\n          console.log('%c Previous', `color: #9E9E9E; font-weight: bold`, previous);\n          console.log('%c Action', `color: #03A9F4; font-weight: bold`, action);\n          console.log('%c Next', `color: #4CAF50; font-weight: bold`, current);\n          console.groupEnd();\n        } else {\n          // IE 11, ... (does not know colors etc.)\n          console.log('Changed state', previous, current);\n        }\n      }\n    });\n  }\n\n  if (process.env.DEBUG_PILET !== undefined) {\n    // check if pilets should be loaded\n    const loadPilets = sessionStorage.getItem('dbg:load-pilets') === 'on';\n    const noPilets = () => Promise.resolve([]);\n    requestPilets = loadPilets ? requestPilets : noPilets;\n  }\n\n  return {\n    pilets: availablePilets,\n    getDependencies,\n    strategy,\n    dependencies: globalDependencies,\n    fetchPilets() {\n      const promise = requestPilets();\n\n      // if we run against the debug pilet API (emulator build only)\n      if (process.env.DEBUG_PILET !== undefined) {\n        // the DEBUG_PILET env should point to an API address used as a proxy\n        const initialTarget = `${location.origin}${process.env.DEBUG_PILET}`;\n        const updateTarget = initialTarget.replace('http', 'ws');\n        const appendix = fetch(initialTarget).then(res => res.json());\n        const ws = new WebSocket(updateTarget);\n\n        ws.onmessage = ({ data }) => {\n          const hardRefresh = sessionStorage.getItem('dbg:hard-refresh') === 'on';\n\n          if (!hardRefresh) {\n            // standard setting is to just perform an inject\n            const meta = JSON.parse(data);\n            const getter = getDependencyResolver(globalDependencies, getDependencies);\n            const fetcher = (url: string) =>\n              fetch(url, {\n                method: 'GET',\n                cache: 'reload',\n              }).then(m => m.text());\n            loadPilet(meta, getter, fetcher).then(pilet => {\n              try {\n                const newApi = createApi(pilet);\n                context.injectPilet(pilet);\n                pilet.setup(newApi);\n              } catch (error) {\n                console.error(error);\n              }\n            });\n          } else {\n            location.reload();\n          }\n        };\n\n        return promise\n          .catch(err => {\n            console.error(`Requesting the pilets failed. We'll continue loading without pilets (DEBUG only).`, err);\n            return [];\n          })\n          .then(pilets => appendix.then(pilet => [...pilets, pilet]));\n      }\n\n      return promise;\n    },\n    createApi,\n  };\n}\n"},"lineCount":null}},"error":null,"hash":"9deaf5167534b626102e74f0613a5166","cacheData":{"env":{"BUILD_PCKG_NAME":"piral-app","BUILD_PCKG_VERSION":"1.0.0","SHARED_DEPENDENCIES":"","BUILD_TIME_FULL":"2020-03-09T12:18:49.871Z","PIRAL_CLI_VERSION":"0.10.9"}}}